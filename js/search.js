var searchFunc=function(t,e,n){"use strict";var r=document.getElementById(e),a=document.getElementById(n);a.innerHTML="<ul><span class='local-search-empty'>首次搜索，正在载入索引文件，请稍后……<span></ul>",$.ajax({url:t,dataType:"xml",success:function(t){var e=$("entry",t).map((function(){return{title:$("title",this).text(),content:$("content",this).text(),url:$("url",this).text()}})).get();a.innerHTML="",r.addEventListener("input",(function(){var t='<ul class="search-result-list">',n=this.value.trim().toLowerCase().split(/[\s\-]+/);if(a.innerHTML="",!(this.value.trim().length<=0)){if(e.forEach((function(e){var r=!0;e.title&&""!==e.title.trim()||(e.title="Untitled");var a=e.title.trim(),s=a.toLowerCase(),l=e.content.trim().replace(/<[^>]+>/g,""),c=l.toLowerCase(),i=e.url,u=-1,o=-1,h=-1;if(""!==c?n.forEach((function(t,e){u=s.indexOf(t),o=c.indexOf(t),u<0&&o<0?r=!1:(o<0&&(o=0),0==e&&(h=o))})):r=!1,r){t+="<li><a href='"+i+"' class='search-result-title'>"+a+"</a>";var f=l;if(h>=0){var p=h-20,m=h+80;p<0&&(p=0),0==p&&(m=100),m>f.length&&(m=f.length);var v=f.substr(p,m);n.forEach((function(t){var e=new RegExp(t,"gi");v=v.replace(e,'<span class="search-keyword">'+t+"</span>")})),t+='<p class="search-result-abstract">'+v+"...</p>"}t+="</li>"}})),-1===(t+="</ul>").indexOf("<li>"))return a.innerHTML="<ul><span class='local-search-empty'>没有找到内容，请尝试更换检索词。<span></ul>";a.innerHTML=t}}))}}),$(document).on("click","#search-close-icon",(function(){$("#search-input").val(""),$("#search-result").html("")}))},getSearchFile=function(){searchFunc("/search.xml","search-input","search-result")};